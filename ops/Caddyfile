:80
encode gzip
log

# Redirect /hud to /hud/
@hudroot path /hud
redir @hudroot /hud/

# Ensure NLU path is routed before generic /api/* (no path strip)
@nlu path /api/nlu/*
reverse_proxy @nlu nlu:9002

# API and health routed to orchestrator
@api path /api/* /health /metrics
reverse_proxy @api orchestrator:8000

# Guardian endpoints (status/health)
@guardian path /guardian* /api/status/guardian
reverse_proxy @guardian guardian:8787

# HUD (dashboard) via /hud (automatiskt strip via handle_path)
handle_path /hud* {
  reverse_proxy dashboard:8501
}

# NLU proxy


