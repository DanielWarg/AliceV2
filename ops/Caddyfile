:80
encode gzip
log

# Redirect /hud to /hud/
@hudroot path /hud
redir @hudroot /hud/

# Ensure NLU path is routed before generic /api/* (no path strip)
@nlu path /api/nlu/*
reverse_proxy @nlu nlu:9002

# Voice service proxy
@voice path /api/voice/*
reverse_proxy @voice voice:8001

# Memory service proxy (before generic /api/*)
@memory path /api/memory/*
reverse_proxy @memory memory:8300

# API and health routed to orchestrator
@api path /api/* /health /metrics /chat
reverse_proxy @api orchestrator:8000

# Guardian endpoints (status/health)
@guardian path /guardian* /api/status/guardian
reverse_proxy @guardian guardian:8787

# HUD redirect to Next.js (port 3001)
@hud path /hud*
redir @hud http://localhost:3001

# Ollama proxy (direct access to local Ollama)
@ollama path /ollama/*
handle_path /ollama/* {
  reverse_proxy host.docker.internal:11434
}

# n8n webhooks
@n8nweb path /webhook/*
handle_path /webhook/* {
  reverse_proxy n8n:5678
}

# NLU proxy


